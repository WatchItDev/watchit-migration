# On Cloudflare, go to Crypto -> SSL and set it to Full or Full(strict)

{
	email info@watchit.movie
    debug
}


(shared_conf) {
    tls internal
    encode zstd gzip

	log {
		output stdout
    }
}


gw.watchit.movie / {
    import shared_conf
    
    header {
        Host {host}
        X-Real-IP {remote}
        X-Forwarded-Proto {scheme}
        Access-Control-Allow-Origin *
        Access-Control-Allow-Credentials true
        Access-Control-Allow-Methods *
        Access-Control-Allow-Headers *
        defer
    }

    reverse_proxy  http://locahost:8000 {
        header_up Host {http.reverse_proxy.upstream.hostport}
        header_up X-Forwarded-Proto {scheme}
    }    
    
}